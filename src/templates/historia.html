{% extends "base.html" %}

{% block head %}
<title>Hist칩ria</title>
<link rel="stylesheet" href="../static/css/blog.css">
<script src="../static/js/sideMenuButton.js" defer></script>
{% endblock %}

{% block body %}
<main>
    <section>
        {% set perfil = Usuario.query.filter_by(user_id=comentario.fk_user_id).first() %}
        <h1>{{ comentario.com_nome_filho }}</h1>
    </section>
    
    <section class="container-comunidade">
        <section class="historia">
            <div class="text-comunidade">
                <div class="text1-comunidade">
                    <a href="/comunidade">
                        <i class="fa-solid fa-chevron-left"></i>
                    </a>
                    <img src="../static/img/usuario.png" alt="usuario">
                    <p>{{ perfil.user_nome }}</p>
                    <button class="sideMenu">
                        <i class="fa-solid fa-ellipsis" style="transform: rotate(90deg);"></i>
                        <div class="sideOption off">
                            <a href=""><i class="fa-solid fa-triangle-exclamation"></i> Reportar</a>
                        </div>
                    </button>
                </div>
                <div class="text2-comunidade">
                    <p>Hist칩ria do meu filho - {{ comentario.com_nome_filho }} |
                        Nascimento:  {{comentario.com_data.strftime('%d/%m/%Y')}}</p>
                </div>
            </div>

            <div class="text-historia">
                <p>
                   {{ comentario.com_historia }}
                </p>
            </div>
            <div class="image-historia">
                <img class="image" src="../static/img/vitor.png" alt="vitor">
                <img class="image" src="../static/img/vitor1.png" alt="vitor1">
                <img class="image" src="../static/img/vitor2.png" alt="vitor2">
                <img class="image" src="../static/img/vitor3.png" alt="vitor3">
                <img class="image" src="../static/img/vitor4.png" alt="vitor4">
            </div>
        </div>
    </section>
</section>
{% if user == None %}
<section>
    <h3>Coment치rios</h3>
</section>
<section class="comunidade">
    <div class="text-comunidade">

            <div class="text1-comunidade">
                <img src="../static/img/usuario.png" alt="usuario">
                <p>Ana Let칤cia de Santos</p>
            </div>

            <div class="text2-comunidade">
                <p>A hist칩ria de supera칞칚o de Vitor Daniel 칠 emocionante e inspiradora. Ele enfrentou desafios desde o in칤cio de sua vida, passando por tratamentos intensos, hemodi치lise e finalmente, o t칚o aguardado transplante renal. Vitor 칠 um verdadeiro guerreiro e sua fam칤lia demonstra amor inabal치vel e determina칞칚o. Esta hist칩ria nos lembra a import칙ncia da esperan칞a, solidariedade e da luta pela vida. Desejamos a Vitor e sua fam칤lia muita sa칰de e felicidade cont칤nua. 游눩仇벒잺</p>
            </div>

    </div>
   

</section>
{% else %}
<section>
    <h3>Coment치rios</h3>
</section>
<section class="container-comentarios">
    <section class="blog">
        <div class="text-blog">
            <div class="text1-comunidade">
                <img src="../static/img/usuario.png" alt="usuario">
                <p>{{ user.user_nome }}r</p>
            </div>
        <form action="/comentar" method="post">

            <label for="comentario"></label>
            <textarea name="comentario" id="auto-resize-input" oninput="autoResize(this)" placeholder="Digite um  coment치rio"></textarea>
            <div class="button-blog">
            <button type="submit" value="publicar">Publicar</button>
            <input name="redirecionar" type="hidden" value="{{ comentario.com_id }}">
            </div>
        </form>
        </div>
    </section>

{% for resposta in respostas %}
<section class="comunidade">
    <div class="text-comunidade">

            <div class="text1-comunidade">
                <img src="../static/img/usuario.png" alt="usuario">
                {% set resposta_p = Usuario.query.filter_by(user_id=resposta.fk_user_id).first() %}
                <p>{{ resposta_p.user_nome }}</p>
            </div>

            <div class="text2-comunidade">
                <p>{{ resposta.com_historia }}</p>
            </div>
    </div>
</section>
{% endfor %}
<script>
    function autoResize(textarea) {
        textarea.style.height = 'auto'; // Redefine a altura para autom치tica
        textarea.style.height = textarea.scrollHeight + 'px'; // Define a altura com base no conte칰do
        }
</script>
{% endif %}
</main>

{% endblock %}